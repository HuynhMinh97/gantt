<ait-template-popup [width]="800" [isLoading]="true" [isPage]="false">
  <div class="user__wrapper" id="user_education">
    <ait-text-gradient [content]="getTitleByMode()" [id]="'form_edit_user_education'"></ait-text-gradient>
    <div class="content__card">
      <div class="form">
        <div class="input_inline">
          <ait-autocomplete-master-data
            [id]="'school'"
            [width]="'400px'"
            [label]="'SCHOOL'"
            [required]="true"
            [allowNew]="true"
            [maxItem]="1"
            [placeholder]="'bach khoa'"
            [collection]="'m_school'"
            [disableOutputDefault]="true"
            [isReset]="resetUserInfo.school"
            [isReadOnly]="resetUserInfo.school"
            (watchValue)="takeMasterValue($event, 'school')"
            [defaultValue]="[userEducationInfo.controls['school'].value]"
            [isSubmit]="isSubmit"
          ></ait-autocomplete-master-data>
        </div>
        <div class="input_inline">
          <ait-input-text
            [length]="400"
            [width]="'400px'"
            [id]="'degree'"
            [label]="'DEGREE'"
            [placeholder]="'engineer'"
            [isReset]="resetUserInfo.degree"
            [readonly]="resetUserInfo.degree"
            (watchValue)="takeInputValue($event, 'degree')"
            [defaultValue]="userEducationInfo.controls['degree'].value"
          >
          </ait-input-text>
        </div>

        <div class="input_inline">
          <ait-input-text
            [length]="400"
            [width]="'400px'"
            [id]="'field_of_study'"
            [label]="'FIELD OF STUDY'"
            [placeholder]="'computer'"
            [isReset]="resetUserInfo.field_of_study"
            [readonly]="resetUserInfo.field_of_study"
            (watchValue)="takeInputValue($event, 'field_of_study')"
            [defaultValue]="userEducationInfo.controls['field_of_study'].value"
          >
          </ait-input-text>
        </div>

        <div class="input_inline">
          <ait-input-text
            [length]="400"
            [width]="'400px'"
            [id]="'grade'"
            [label]="'GRADE'"
            [placeholder]="'Good'"
            [isReset]="resetUserInfo.grade"
            [readonly]="resetUserInfo.grade"
            (watchValue)="takeInputValue($event, 'grade')"
            [defaultValue]="userEducationInfo.controls['grade'].value"
          >
          </ait-input-text>
        </div>

        <div class="input_date">
          <ait-datepicker
            [label]="'start date'"
            [format]="'yyyy/MM'"
            [placeholder]="'2021/01'"
            [id]="'start_date_from'"
            [style]="{ width: '170px' }"
            [isReset]="resetUserInfo.start_date_from"
            [defaultValue]="userEducationInfo.controls['start_date_from'].value"
            (watchValue)="
              takeDatePickerValue(
                $event?.value,
                'userEducationInfo',
                'start_date_from'
              )
            "
          ></ait-datepicker>
          <span>~</span>
          <ait-datepicker
            [placeholder]="'2021/01'"
            [format]="'yyyy/MM'"
            [id]="'start_date_to'"
            [style]="{ width: '170px' }"
            [isReset]="resetUserInfo.start_date_to"
            [defaultValue]="userEducationInfo.controls['start_date_to'].value"
            (watchValue)="
              takeDatePickerValue(
                $event?.value,
                'userEducationInfo',
                'start_date_to'
              )
            "
          ></ait-datepicker>
        </div>
        <ait-error-message
          [id]="'start-date'"
          [errors]="errorArr"
        ></ait-error-message>

        <div class="input_inline">
          <ait-input-text
            [id]="'description'"
            [length]="4000"
            [rows]="4"
            [label]="'description'"
            [placeholder]="'place your text'"
            [width]="'400px'"
            [isReset]="resetUserInfo.description"
            [readonly]="resetUserInfo.description"
            (watchValue)="takeInputValue($event, 'description')"
            [defaultValue]="userEducationInfo.controls['description'].value"
          >
          </ait-input-text>
        </div>

        <div class="input_area" style="margin-top: 14px">
          <ait-label [label]="'FILES'"></ait-label>
          <label
            class="file-max"
            style="display: flex !important; color: #8f9bb3; margin: 0"
            ><nb-icon icon="attach-outline"></nb-icon>
            <p id="max_file">{{ 'upload max 5 files' | translate }}</p>
          </label>
          <ait-input-file
            [id]="'file'"
            [maxSize]="1000"
            [maxFiles]="5"
            [required]="false"
            [hasStatus]="false"
            [isReset]="isResetFile"
            [placeholder]="'select file'"
            [fileKeys]="userEducationInfo.controls['file'].value"
            (watchValue)="takeFiles($event.value)"
            [isSubmit]="isSubmit"
          ></ait-input-file>
        </div>
      </div>
    </div>
    <div class="sticky">
      <div class="action-row">
        <div class="block">
          <ait-button
            *ngIf="mode !== 'VIEW'"
            [id]="'cancel'"
            [width]="'150px'"
            [title]="'cancel'"
            [isDefault]="true"
            (click)="back()"
          ></ait-button>

          <ait-button
            *ngIf="mode === 'EDIT'"
            [id]="'delete'"
            [width]="'150px'"
            [title]="'delete'"
            (click)="onDelete()"
            [isDefault]="true"
          >
          </ait-button>

          <ait-button
            *ngIf="mode !== 'VIEW'"
            [id]="'reset'"
            [width]="'150px'"
            [title]="'reset'"
            (click)="resetForm()"
            [isDefault]="true"
          >
          </ait-button>

          <ait-button
            *ngIf="mode === 'NEW'"
            [id]="'saveAndContinue'"
            [title]="'save and continue'"
            (click)="saveAndContinue()"
            [isDefault]="true"
            [width]="'150px'"
          ></ait-button>

          <ait-button
            [id]="'saveAndClose'"
            *ngIf="(isChanged && mode === 'EDIT') || mode === 'NEW'"
            [title]="'save and close'"
            (click)="saveAndClose()"
            [isDefault]="true"
            [width]="'150px'"
          >
          </ait-button>
          <ait-button
            *ngIf="!isChanged && mode === 'EDIT'"
            [id]="'saveAndClose'"
            [width]="'150px'"
            [title]="'save and close'"
            [style]="'disabled'"
          ></ait-button>
        </div>
      </div>
    </div>
  </div>
</ait-template-popup>
